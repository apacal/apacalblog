<!-- link bootstrap table  -->
<link href="__BS_TABLES__/dist/bootstrap-table.min.css" rel="stylesheet">
<script src="__BS_TABLES__/dist/bootstrap-table.min.js"></script>




<div class="container-table" delUrl="{$delUrl}" statusUrl="{$statusUrl}" >

<table class="bootstrap-table" data-toggle="table" data-url="{$data_json_url}" data-cache="false"


       data-show-columns="true" data-id-field="id"
       data-click-to-select="false"
       data-show-refresh="true"
       data-show-toggle="true"
       data-search="true"
       data-pagination="true" data-page-list="[5, 10, 20, 50, 100, 200]"
       data-toolbar=""
    >
    <thead>
        <tr>
            <th data-field="pk" data-checkbox="true"></th>

            <th data-field="pk" data-formatter="operateFormatter" data-events="operateEvents"
                data-halign="center" data-align="center"
                >Operate</th>

            <volist name="manage_fields" id="fields_vo">

                <th data-field="{$fields_vo.field}" data-sortable="true"
                    data-halign="center" data-align="center"
                <eq name="fields_vo.field" value="status">
                    data-formatter="statusFormatter"
                </eq>

                <eq name="fields_vo.field" value="icon">
                    data-formatter="iconFormatter"
                </eq>

                    >
                    {$fields_vo.name}

                </th>
            </volist>
        </tr>
    </thead>
</table>
</div>

<script>

    $(document).ready(function() {
        $(".bootstrap-table").bind("all.bs.table", initSwitch);
        $(".bootstrap-table").bind("load-success.bs.table",function() {
            var customToolbar = $(this).find(".bars");
            //console.log(customToolbar);
            $(customToolbar).html(
            '<div class="btn-group"> <button class="btn btn-default" onclick="deleteRows(this);"> Delete </button> <button class="btn btn-default" onclick="statusDisable(this);"> Disable </button> <button class="btn btn-default " onclick="statusEnable(this);"> Enable </button> </div>'
            )
        });
    });


    function statusDisable(dom) {
        window.bsTableDom =  $(dom).parents(".bootstrap-table").find(".bootstrap-table");
        var ret = getSelectIds(window.bsTableDom);
        var ids = ret.ids;
        var len = ret.len;
        var url = $(window.bsTableDom).parents(".container-table").attr('statusUrl');
        ajaxChangeRows(url, {ids:ids,status:false},"disable " + len + ' row success')

    }
    function statusEnable(dom) {
        window.bsTableDom =  $(dom).parents(".bootstrap-table").find(".bootstrap-table");
        var ret = getSelectIds(window.bsTableDom);
        var ids = ret.ids;
        var len = ret.len;
        var url = $(window.bsTableDom).parents(".container-table").attr('statusUrl');
        ajaxChangeRows(url, {ids:ids,status:true},"enable " + len + ' row success')

    }



</script>